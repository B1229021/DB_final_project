<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç›¸ç´„ç³»çµ±</title>
    <style>
        /* ========== å…¨åŸŸé‡ç½®å’ŒåŸºç¤æ¨£å¼ ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box; /* è®“é‚Šæ¡†å’Œå…§è·åŒ…å«åœ¨å…ƒç´ ç¸½å¯¬åº¦å…§ */
        }

        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            /* è¨­å®šæ¼¸å±¤èƒŒæ™¯è‰² */
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; /* ç¢ºä¿é é¢è‡³å°‘ä½”æ»¿æ•´å€‹è¦–çª—é«˜åº¦ */
            color: #333;
        }

        /* ========== ä¸»è¦å®¹å™¨æ¨£å¼ ========== */
        .container {
            max-width: 1200px;
            margin: 0 auto; /* æ°´å¹³ç½®ä¸­ */
            padding: 0 15px;
            min-height: 100vh;
        }

        /* ========== é é¢æ¨™é¡Œå€åŸŸ ========== */
        .header {
            background: rgba(255, 255, 255, 0.95); /* åŠé€æ˜ç™½è‰²èƒŒæ™¯ */
            backdrop-filter: blur(10px); /* èƒŒæ™¯æ¨¡ç³Šæ•ˆæœ */
            padding: 1rem;
            border-radius: 15px;
            margin: 1rem 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); /* é™°å½±æ•ˆæœ */
            text-align: center;
        }

        .header h1 {
            color: #764ba2;
            font-size: 1.8rem;
            font-weight: 700;
        }

        /* ========== æ§åˆ¶é¢æ¿æ¨£å¼ ========== */
        .control-panel {
            background: rgba(255, 255, 255, 0.9);
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: flex;
            gap: 15px; /* å…ƒç´ é–“è· */
            flex-wrap: wrap; /* å…è¨±æ›è¡Œ */
            align-items: center;
        }

        /* ========== æŒ‰éˆ•åŸºç¤æ¨£å¼ ========== */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px; /* åœ“è§’æŒ‰éˆ• */
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease; /* å¹³æ»‘éæ¸¡æ•ˆæœ */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        /* ä¸»è¦æŒ‰éˆ•æ¨£å¼ï¼ˆæ¼¸å±¤è—ç´«è‰²ï¼‰ */
        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px); /* æ‡¸åœæ™‚å‘ä¸Šç§»å‹• */
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        }

        /* æ¬¡è¦æŒ‰éˆ•æ¨£å¼ï¼ˆç°è‰²ï¼‰ */
        .btn-secondary {
            background: #f8f9fa;
            color: #666;
            border: 1px solid #ddd;
        }

        /* å±éšªæŒ‰éˆ•æ¨£å¼ï¼ˆç´…è‰²ï¼‰ */
        .btn-danger {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
        }

        /* ========== è¡¨å–®æ§åˆ¶é …æ¨£å¼ ========== */
        .select-dropdown, .time-input {
            padding: 12px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 0.9rem;
            background: white;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        /* ========== æ´»å‹•åˆ—è¡¨ç¶²æ ¼ä½ˆå±€ ========== */
        .events-list {
            display: grid;
            /* éŸ¿æ‡‰å¼ç¶²æ ¼ï¼šæ¯åˆ—æœ€å°‘300pxå¯¬åº¦ï¼Œè‡ªå‹•å¡«æ»¿ */
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem; /* ç¶²æ ¼é–“è· */
            margin-bottom: 2rem;
        }

        /* ========== æ´»å‹•å¡ç‰‡æ¨£å¼ ========== */
        .event-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer; /* æ»‘é¼ æŒ‡æ¨™è®Šæˆæ‰‹å‹ */
        }

        /* å¡ç‰‡æ‡¸åœæ•ˆæœ */
        .event-card:hover {
            transform: translateY(-5px); /* å‘ä¸Šæµ®èµ·æ•ˆæœ */
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        /* æ´»å‹•å¡ç‰‡é ­éƒ¨å€åŸŸ */
        .event-header {
            display: flex;
            justify-content: space-between; /* å…©ç«¯å°é½Š */
            align-items: center;
            margin-bottom: 1rem;
        }

        /* æ´»å‹•é¡åˆ¥æ¨™ç±¤ */
        .event-category {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        /* æ´»å‹•æ™‚é–“é¡¯ç¤º */
        .event-time {
            color: #666;
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* ========== æ´»å‹•è©³æƒ…å€åŸŸ ========== */
        .event-details {
            margin-bottom: 1rem;
        }

        /* æ¯å€‹è©³æƒ…é …ç›® */
        .event-detail-item {
            display: flex;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        /* è©³æƒ…æ¨™ç±¤ï¼ˆå¦‚ï¼šæ´»å‹•ã€å‡ºç™¼ç­‰ï¼‰ */
        .event-detail-label {
            font-weight: 600;
            color: #555;
            min-width: 80px; /* å›ºå®šå¯¬åº¦è®“å°é½Šæ›´æ•´é½Š */
        }

        /* è©³æƒ…å€¼ */
        .event-detail-value {
            color: #777;
            flex: 1; /* ä½”æ“šå‰©é¤˜ç©ºé–“ */
        }

        /* ========== æ´»å‹•å¡ç‰‡åº•éƒ¨ ========== */
        .event-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid #eee; /* ä¸Šé‚Šæ¡†åˆ†éš”ç·š */
        }

        /* åƒèˆ‡äººæ•¸é¡¯ç¤º */
        .participant-count {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #666;
            font-size: 0.9rem;
        }

        /* åŠ å…¥æŒ‰éˆ•ï¼ˆå°å‹ï¼‰ */
        .join-btn {
            padding: 8px 16px;
            font-size: 0.8rem;
            border-radius: 20px;
        }

        /* ========== å½ˆå‡ºè¦–çª—æ¨£å¼ ========== */
        .modal {
            display: none; /* é è¨­éš±è— */
            position: fixed;
            z-index: 1000; /* ç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* åŠé€æ˜é®ç½© */
            backdrop-filter: blur(5px); /* èƒŒæ™¯æ¨¡ç³Š */
        }

        /* å½ˆçª—å…§å®¹å®¹å™¨ */
        .modal-content {
            background: white;
            margin: 5% auto; /* å‚ç›´ç½®ä¸­ */
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh; /* æœ€å¤§é«˜åº¦ä¸è¶…éè¦–çª—90% */
            overflow-y: auto; /* å…§å®¹éå¤šæ™‚å¯æ»¾å‹• */
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        /* ========== å½ˆçª—æ¨™é¡Œå€åŸŸ ========== */
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-radius: 20px 20px 0 0; /* åªæœ‰ä¸Šæ–¹åœ“è§’ */
        }

        /* é—œé–‰æŒ‰éˆ• */
        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        /* ========== è¡¨å–®ç¾¤çµ„æ¨£å¼ ========== */
        .form-group {
            margin-bottom: 1.5rem;
            padding: 0 1.5rem;
        }

        /* ç¬¬ä¸€å€‹è¡¨å–®ç¾¤çµ„éœ€è¦ä¸Šæ–¹å…§è· */
        .form-group:first-child {
            padding-top: 1.5rem;
        }

        /* è¡¨å–®æ¨™ç±¤ */
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #555;
        }

        /* è¡¨å–®è¼¸å…¥æ¡†æ¨£å¼ */
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        /* ========== è¡¨å–®æ“ä½œå€åŸŸ ========== */
        .form-actions {
            display: flex;
            justify-content: flex-end; /* é å³å°é½Š */
            gap: 15px;
            padding: 1.5rem;
            border-top: 1px solid #eee;
            background: #f8f9fa;
            border-radius: 0 0 20px 20px; /* åªæœ‰ä¸‹æ–¹åœ“è§’ */
        }

        /* ========== é€šçŸ¥è¨Šæ¯æ¨£å¼ ========== */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            z-index: 1001; /* åœ¨å½ˆçª—ä¹‹ä¸Š */
            max-width: 300px;
        }

        /* æˆåŠŸé€šçŸ¥ï¼ˆç¶ è‰²é‚Šæ¡†ï¼‰ */
        .notification.success {
            border-left: 4px solid #28a745;
        }

        /* éŒ¯èª¤é€šçŸ¥ï¼ˆç´…è‰²é‚Šæ¡†ï¼‰ */
        .notification.error {
            border-left: 4px solid #dc3545;
        }

        /* ========== è¼‰å…¥å‹•ç•«æ¨£å¼ ========== */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }

        /* æ—‹è½‰å‹•ç•«çš„åœ“åœˆ */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea; /* åªæœ‰é ‚éƒ¨æœ‰é¡è‰² */
            border-radius: 50%; /* åœ“å½¢ */
            animation: spin 1s linear infinite; /* æŒçºŒæ—‹è½‰ */
        }

        /* æ—‹è½‰é—œéµå¹€å‹•ç•« */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ========== ç©ºç‹€æ…‹æ¨£å¼ ========== */
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: #666;
        }

        /* ========== éŸ¿æ‡‰å¼è¨­è¨ˆ ========== */
        @media (max-width: 768px) {
            /* æ‰‹æ©Ÿç‰ˆï¼šæ§åˆ¶é¢æ¿æ”¹ç‚ºå‚ç›´æ’åˆ— */
            .control-panel {
                flex-direction: column;
                align-items: stretch; /* å…ƒç´ å¡«æ»¿å¯¬åº¦ */
            }
            
            /* æ‰‹æ©Ÿç‰ˆï¼šæ´»å‹•åˆ—è¡¨æ”¹ç‚ºå–®åˆ— */
            .events-list {
                grid-template-columns: 1fr;
            }
            
            /* æ‰‹æ©Ÿç‰ˆï¼šå½ˆçª—ä½”æ›´å¤šå¯¬åº¦ */
            .modal-content {
                width: 95%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é é¢æ¨™é¡Œ -->
        <header class="header">
            <h1>ç›¸ç´„ç³»çµ±</h1>
        </header>

        <main>
            <!-- æ§åˆ¶é¢æ¿ï¼šåŒ…å«ç™¼èµ·æ´»å‹•ã€ç¯©é¸ç­‰åŠŸèƒ½ -->
            <div class="control-panel">
                <button id="createBtn" class="btn btn-primary">ç™¼èµ·æ´»å‹•</button>
                <!-- é¡åˆ¥ç¯©é¸ä¸‹æ‹‰é¸å–® -->
                <select id="categoryFilter" class="select-dropdown">
                    <option value="">æ‰€æœ‰é¡åˆ¥</option>
                    <option value="ç¾é£Ÿ">ç¾é£Ÿ</option>
                    <option value="é‹å‹•">é‹å‹•</option>
                    <option value="å¨›æ¨‚">å¨›æ¨‚</option>
                    <option value="å­¸ç¿’">å­¸ç¿’</option>
                    <option value="å…¶ä»–">å…¶ä»–</option>
                </select>
                <!-- æ™‚é–“ç¯©é¸è¼¸å…¥æ¡† -->
                <input type="datetime-local" id="timeFilter" class="time-input">
                <button id="filterBtn" class="btn btn-secondary">ç¯©é¸</button>
                <button id="refreshBtn" class="btn btn-secondary">é‡æ–°è¼‰å…¥</button>
            </div>

            <!-- æ´»å‹•åˆ—è¡¨å®¹å™¨ -->
            <div id="eventsList" class="events-list">
                <!-- åˆå§‹è¼‰å…¥å‹•ç•« -->
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- ========== ç™¼èµ·æ´»å‹•å½ˆçª— ========== -->
    <div id="createModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ç™¼èµ·æ´»å‹•</h2>
                <span class="close" id="closeCreate">&times;</span>
            </div>
            <form id="createForm">
                <!-- æ´»å‹•æ™‚é–“é¸æ“‡ -->
                <div class="form-group">
                    <label>æ´»å‹•æ™‚é–“:</label>
                    <input type="datetime-local" id="eventTime" required>
                </div>
                <!-- å‡ºç™¼åœ°é»è¼¸å…¥ -->
                <div class="form-group">
                    <label>å‡ºç™¼åœ°é»:</label>
                    <input type="text" id="startLocation" placeholder="ä¾‹å¦‚ï¼šå°åŒ—è»Šç«™" required>
                </div>
                <!-- ç›®çš„åœ°è¼¸å…¥ -->
                <div class="form-group">
                    <label>ç›®çš„åœ°:</label>
                    <input type="text" id="destination" placeholder="ä¾‹å¦‚ï¼šæŸæŸé¤å»³" required>
                </div>
                <!-- æ´»å‹•é¡åˆ¥é¸æ“‡ -->
                <div class="form-group">
                    <label>æ´»å‹•é¡åˆ¥:</label>
                    <select id="eventCategory" required>
                        <option value="">é¸æ“‡é¡åˆ¥</option>
                        <option value="ç¾é£Ÿ">ç¾é£Ÿ</option>
                        <option value="é‹å‹•">é‹å‹•</option>
                        <option value="å¨›æ¨‚">å¨›æ¨‚</option>
                        <option value="å­¸ç¿’">å­¸ç¿’</option>
                        <option value="å…¶ä»–">å…¶ä»–</option>
                    </select>
                </div>
                <!-- äººæ•¸ä¸Šé™è¨­å®š -->
                <div class="form-group">
                    <label>äººæ•¸ä¸Šé™:</label>
                    <input type="number" id="maxParticipants" min="2" max="20" value="4">
                </div>
                <!-- æ´»å‹•æè¿° -->
                <div class="form-group">
                    <label>å‚™è¨»èªªæ˜:</label>
                    <textarea id="description" placeholder="æ´»å‹•è©³ç´°èªªæ˜æˆ–ç‰¹æ®Šè¦æ±‚"></textarea>
                </div>
                <!-- è¯çµ¡æ–¹å¼ -->
                <div class="form-group">
                    <label>è¯çµ¡æ–¹å¼:</label>
                    <input type="text" id="contact" placeholder="é›»è©±æˆ–Line ID" required>
                </div>
                <!-- è¡¨å–®æ“ä½œæŒ‰éˆ• -->
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">ç™¼èµ·æ´»å‹•</button>
                    <button type="button" id="cancelCreate" class="btn btn-secondary">å–æ¶ˆ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ========== æ´»å‹•è©³æƒ…å½ˆçª— ========== -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>æ´»å‹•è©³æƒ…</h2>
                <span class="close" id="closeDetail">&times;</span>
            </div>
            <!-- è©³æƒ…å…§å®¹å°‡ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
            <div id="detailContent">
                <!-- å‹•æ…‹å…§å®¹ -->
            </div>
        </div>
    </div>

    <script>
        /**
         * ç›¸ç´„ç³»çµ±ä¸»é¡åˆ¥
         * è² è²¬ç®¡ç†æ•´å€‹æ‡‰ç”¨ç¨‹å¼çš„åŠŸèƒ½
         */
        class AppointmentSystem {
            /**
             * å»ºæ§‹å‡½å¼ï¼šåˆå§‹åŒ–ç³»çµ±
             */
            constructor() {
                // APIåŸºç¤URLè¨­å®šï¼ˆå¯¦éš›ä½¿ç”¨æ™‚éœ€è¦æ›¿æ›ç‚ºçœŸå¯¦çš„APIåœ°å€ï¼‰
                this.apiBaseUrl = 'https://your-api-domain.com/api';
                // å„²å­˜æ‰€æœ‰æ´»å‹•çš„é™£åˆ—
                this.events = [];
                // åˆå§‹åŒ–ç³»çµ±
                this.init();
            }

            /**
             * åˆå§‹åŒ–ç³»çµ±ï¼šè¨­å®šäº‹ä»¶ç›£è½å™¨ä¸¦è¼‰å…¥æ´»å‹•
             */
            init() {
                this.setupEventListeners();
                this.loadEvents();
            }

            /**
             * è¨­å®šæ‰€æœ‰äº‹ä»¶ç›£è½å™¨
             * åŒ…æ‹¬æŒ‰éˆ•é»æ“Šã€è¡¨å–®æäº¤ã€å½ˆçª—é—œé–‰ç­‰äº‹ä»¶
             */
            setupEventListeners() {
                // ç™¼èµ·æ´»å‹•æŒ‰éˆ•
                document.getElementById('createBtn').addEventListener('click', () => this.showCreateModal());
                
                // ç™¼èµ·æ´»å‹•å½ˆçª—çš„é—œé–‰äº‹ä»¶
                document.getElementById('closeCreate').addEventListener('click', () => this.hideCreateModal());
                document.getElementById('cancelCreate').addEventListener('click', () => this.hideCreateModal());
                
                // ç™¼èµ·æ´»å‹•è¡¨å–®æäº¤äº‹ä»¶
                document.getElementById('createForm').addEventListener('submit', (e) => this.handleCreateSubmit(e));
                
                // æ´»å‹•è©³æƒ…å½ˆçª—é—œé–‰äº‹ä»¶
                document.getElementById('closeDetail').addEventListener('click', () => this.hideDetailModal());
                
                // ç¯©é¸å’Œé‡æ–°è¼‰å…¥æŒ‰éˆ•
                document.getElementById('filterBtn').addEventListener('click', () => this.filterEvents());
                document.getElementById('refreshBtn').addEventListener('click', () => this.loadEvents());
                
                // é»æ“Šå½ˆçª—å¤–éƒ¨å€åŸŸé—œé–‰å½ˆçª—
                window.addEventListener('click', (e) => {
                    if (e.target.classList.contains('modal')) {
                        e.target.style.display = 'none';
                    }
                });
            }

            /**
             * å¾APIè¼‰å…¥æ´»å‹•è³‡æ–™
             * ç›®å‰ä½¿ç”¨æ¨¡æ“¬è³‡æ–™ï¼Œå¯¦éš›ä½¿ç”¨æ™‚éœ€è¦é€£æ¥çœŸå¯¦API
             */
            async loadEvents() {
                try {
                    // é¡¯ç¤ºè¼‰å…¥å‹•ç•«
                    this.showLoading();
                    
                    // é‡ç½®ç¯©é¸å™¨ - ä¿®æ­£å•é¡Œ2ï¼šé‡æ–°è¼‰å…¥æ™‚æ¸…ç©ºæ™‚é–“ç¯©é¸
                    document.getElementById('categoryFilter').value = '';
                    document.getElementById('timeFilter').value = '';
                    
                    // å¯¦éš›APIèª¿ç”¨ç¯„ä¾‹ï¼ˆè¨»è§£æ‰çš„éƒ¨åˆ†ï¼‰
                    // const response = await fetch(`${this.apiBaseUrl}/events`);
                    // const events = await response.json();
                    
                    // ä½¿ç”¨æ¨¡æ“¬è³‡æ–™
                    const events = await this.getMockEvents();
                    
                    // æ›´æ–°æœ¬åœ°æ´»å‹•é™£åˆ—ä¸¦æ¸²æŸ“åˆ°é é¢
                    this.events = events;
                    this.renderEvents(events);
                } catch (error) {
                    console.error('è¼‰å…¥æ´»å‹•å¤±æ•—:', error);
                    this.showNotification('è¼‰å…¥æ´»å‹•å¤±æ•—', 'error');
                    this.renderEvents([]); // æ¸²æŸ“ç©ºåˆ—è¡¨
                }
            }

            /**
             * å–å¾—æ¨¡æ“¬æ´»å‹•è³‡æ–™
             * å¯¦éš›ä½¿ç”¨æ™‚æ‡‰è©²åˆªé™¤æ­¤å‡½å¼ï¼Œç›´æ¥ä½¿ç”¨API
             * @returns {Promise} å›å‚³åŒ…å«æ´»å‹•è³‡æ–™çš„Promise
             */
            async getMockEvents() {
                return new Promise(resolve => {
                    // æ¨¡æ“¬APIå»¶é²
                    setTimeout(() => {
                        resolve([
                            {
                                id: 1,
                                title: 'è¥¿é–€ç”ºç¾é£Ÿä¹‹æ—…',
                                category: 'ç¾é£Ÿ',
                                time: '2025-05-25T19:00',
                                startLocation: 'å°åŒ—è»Šç«™',
                                destination: 'è¥¿é–€ç”º',
                                description: 'ä¸€èµ·å»è¥¿é–€ç”ºåƒç¾é£Ÿï¼',
                                maxParticipants: 4,
                                currentParticipants: 2,
                                contact: 'Line: foodlover123',
                                createdAt: '2025-05-22T10:00:00'
                            },
                            {
                                id: 2,
                                title: 'ä¿¡ç¾©å€é›»å½±ç´„æœƒ',
                                category: 'å¨›æ¨‚',
                                time: '2025-05-26T15:00',
                                startLocation: 'å¸‚æ”¿åºœç«™',
                                destination: 'ä¿¡ç¾©å¨ç§€',
                                description: 'çœ‹æœ€æ–°ä¸Šæ˜ çš„é›»å½±',
                                maxParticipants: 6,
                                currentParticipants: 3,
                                contact: '0912-345-678',
                                createdAt: '2025-05-22T14:30:00'
                            }
                        ]);
                    }, 1000); // 1ç§’å»¶é²æ¨¡æ“¬ç¶²è·¯è«‹æ±‚
                });
            }

            /**
             * å»ºç«‹æ–°æ´»å‹•
             * @param {Object} eventData - æ´»å‹•è³‡æ–™ç‰©ä»¶
             * @returns {Promise} APIå›æ‡‰çµæœ
             */
            async createEvent(eventData) {
                try {
                    // å¯¦éš›APIèª¿ç”¨ç¯„ä¾‹ï¼ˆè¨»è§£æ‰çš„éƒ¨åˆ†ï¼‰
                    // const response = await fetch(`${this.apiBaseUrl}/events`, {
                    //     method: 'POST',
                    //     headers: {
                    //         'Content-Type': 'application/json',
                    //     },
                    //     body: JSON.stringify(eventData)
                    // });
                    // const result = await response.json();
                    
                    // æ¨¡æ“¬APIå›æ‡‰
                    const result = {
                        success: true,
                        id: Date.now(), // ä½¿ç”¨æ™‚é–“æˆ³ä½œç‚ºID
                        message: 'æ´»å‹•ç™¼èµ·æˆåŠŸ'
                    };
                    
                    // ä¿®æ­£å•é¡Œ1ï¼šå°‡æ–°å»ºçš„æ´»å‹•æ·»åŠ åˆ°æœ¬åœ°æ´»å‹•é™£åˆ—
                    if (result.success) {
                        const newEvent = {
                            ...eventData,
                            id: result.id,
                            currentParticipants: 1, // ç™¼èµ·äººè‡ªå‹•æˆç‚ºç¬¬ä¸€å€‹åƒèˆ‡è€…
                            createdAt: new Date().toISOString()
                        };
                        
                        // å°‡æ–°æ´»å‹•æ·»åŠ åˆ°æ´»å‹•é™£åˆ—çš„é–‹é ­ï¼ˆæœ€æ–°çš„åœ¨æœ€å‰é¢ï¼‰
                        this.events.unshift(newEvent);
                    }
                    
                    return result;
                } catch (error) {
                    throw new Error('ç™¼èµ·æ´»å‹•å¤±æ•—');
                }
            }

            /**
             * åŠ å…¥æ´»å‹•
             * @param {number} eventId - æ´»å‹•ID
             */
            async joinEvent(eventId) {
                try {
                    // å¯¦éš›APIèª¿ç”¨ç¯„ä¾‹ï¼ˆè¨»è§£æ‰çš„éƒ¨åˆ†ï¼‰
                    // const response = await fetch(`${this.apiBaseUrl}/events/${eventId}/join`, {
                    //     method: 'POST',
                    //     headers: {
                    //         'Content-Type': 'application/json',
                    //     }
                    // });
                    // const result = await response.json();
                    
                    // æ¨¡æ“¬åŠ å…¥æ´»å‹•é‚è¼¯
                    const event = this.events.find(e => e.id === eventId);
                    if (event && event.currentParticipants < event.maxParticipants) {
                        event.currentParticipants++; // å¢åŠ åƒèˆ‡äººæ•¸
                        this.showNotification('æˆåŠŸåŠ å…¥æ´»å‹•ï¼', 'success');
                        this.renderEvents(this.events); // é‡æ–°æ¸²æŸ“æ´»å‹•åˆ—è¡¨
                    } else {
                        this.showNotification('æ´»å‹•å·²æ»¿æˆ–ä¸å­˜åœ¨', 'error');
                    }
                } catch (error) {
                    this.showNotification('åŠ å…¥æ´»å‹•å¤±æ•—', 'error');
                }
            }

            /**
             * é¡¯ç¤ºè¼‰å…¥å‹•ç•«
             */
            showLoading() {
                document.getElementById('eventsList').innerHTML = `
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                `;
            }

            /**
             * æ¸²æŸ“æ´»å‹•åˆ—è¡¨åˆ°é é¢
             * @param {Array} events - æ´»å‹•é™£åˆ—
             */
            renderEvents(events) {
                const eventsList = document.getElementById('eventsList');
                
                // å¦‚æœæ²’æœ‰æ´»å‹•ï¼Œé¡¯ç¤ºç©ºç‹€æ…‹
                if (events.length === 0) {
                    eventsList.innerHTML = `
                        <div class="empty-state">
                            <h3>æš«ç„¡æ´»å‹•</h3>
                            <p>ç›®å‰æ²’æœ‰æ´»å‹•ï¼Œç™¼èµ·ä¸€å€‹æ–°æ´»å‹•å§ï¼</p>
                            <button class="btn btn-primary" onclick="app.showCreateModal()">ç™¼èµ·æ´»å‹•</button>
                        </div>
                    `;
                    return;
                }

                // ç”Ÿæˆæ´»å‹•å¡ç‰‡HTML
                eventsList.innerHTML = events.map(event => `
                    <div class="event-card" onclick="app.showEventDetail(${event.id})">
                        <div class="event-header">
                            <span class="event-category">${event.category}</span>
                            <span class="event-time">${this.formatDateTime(event.time)}</span>
                        </div>
                        <div class="event-details">
                            <div class="event-detail-item">
                                <span class="event-detail-label">æ´»å‹•:</span>
                                <span class="event-detail-value">${event.title || event.destination}</span>
                            </div>
                            <div class="event-detail-item">
                                <span class="event-detail-label">å‡ºç™¼:</span>
                                <span class="event-detail-value">${event.startLocation}</span>
                            </div>
                            <div class="event-detail-item">
                                <span class="event-detail-label">ç›®çš„åœ°:</span>
                                <span class="event-detail-value">${event.destination}</span>
                            </div>
                            ${event.description ? `
                            <div class="event-detail-item">
                                <span class="event-detail-label">èªªæ˜:</span>
                                <span class="event-detail-value">${event.description}</span>
                            </div>
                            ` : ''}
                        </div>
                        <div class="event-footer">
                            <div class="participant-count">
                                <span>ğŸ‘¥</span>
                                <span>${event.currentParticipants}/${event.maxParticipants}</span>
                            </div>
                            ${event.currentParticipants < event.maxParticipants ? `
                                <button class="btn btn-primary join-btn" onclick="event.stopPropagation(); app.joinEvent(${event.id})">
                                    åŠ å…¥ +1
                                </button>
                            ` : `
                                <span class="btn btn-secondary join-btn">å·²æ»¿</span>
                            `}
                        </div>
                    </div>
                `).join('');
            }

            /**
             * é¡¯ç¤ºç™¼èµ·æ´»å‹•å½ˆçª—
             */
            showCreateModal() {
                document.getElementById('createModal').style.display = 'block';
            }

            /**
             * éš±è—ç™¼èµ·æ´»å‹•å½ˆçª—
             */
            hideCreateModal() {
                document.getElementById('createModal').style.display = 'none';
                // æ¸…ç©ºè¡¨å–®
                document.getElementById('createForm').reset();
            }

            /**
             * è™•ç†ç™¼èµ·æ´»å‹•è¡¨å–®æäº¤
             * @param {Event} e - è¡¨å–®æäº¤äº‹ä»¶
             */
            async handleCreateSubmit(e) {
                e.preventDefault();
                
                // å–å¾—è¡¨å–®è³‡æ–™
                const formData = new FormData(e.target);
                const eventData = {
                    title: formData.get('destination') || document.getElementById('destination').value,
                    category: document.getElementById('eventCategory').value,
                    time: document.getElementById('eventTime').value,
                    startLocation: document.getElementById('startLocation').value,
                    destination: document.getElementById('destination').value,
                    description: document.getElementById('description').value,
                    maxParticipants: parseInt(document.getElementById('maxParticipants').value),
                    contact: document.getElementById('contact').value
                };

                try {
                    const result = await this.createEvent(eventData);
                    if (result.success) {
                        this.showNotification('æ´»å‹•ç™¼èµ·æˆåŠŸï¼', 'success');
                        this.hideCreateModal();
                        // ä¿®å¾©å•é¡Œ1ï¼šç™¼èµ·æ´»å‹•å¾Œé‡æ–°æ¸²æŸ“æ´»å‹•åˆ—è¡¨
                        this.renderEvents(this.events);
                    } else {
                        this.showNotification('ç™¼èµ·æ´»å‹•å¤±æ•—', 'error');
                    }
                } catch (error) {
                    this.showNotification('ç™¼èµ·æ´»å‹•å¤±æ•—', 'error');
                }
            }

            /**
             * é¡¯ç¤ºæ´»å‹•è©³æƒ…å½ˆçª—
             * @param {number} eventId - æ´»å‹•ID
             */
            showEventDetail(eventId) {
                const event = this.events.find(e => e.id === eventId);
                if (!event) return;

                const detailContent = document.getElementById('detailContent');
                detailContent.innerHTML = `
                    <div style="padding: 1.5rem;">
                        <div class="event-detail-item">
                            <span class="event-detail-label">æ´»å‹•æ™‚é–“:</span>
                            <span class="event-detail-value">${this.formatDateTime(event.time)}</span>
                        </div>
                        <div class="event-detail-item">
                            <span class="event-detail-label">å‡ºç™¼åœ°é»:</span>
                            <span class="event-detail-value">${event.startLocation}</span>
                        </div>
                        <div class="event-detail-item">
                            <span class="event-detail-label">ç›®çš„åœ°:</span>
                            <span class="event-detail-value">${event.destination}</span>
                        </div>
                        <div class="event-detail-item">
                            <span class="event-detail-label">æ´»å‹•é¡åˆ¥:</span>
                            <span class="event-detail-value">${event.category}</span>
                        </div>
                        <div class="event-detail-item">
                            <span class="event-detail-label">äººæ•¸:</span>
                            <span class="event-detail-value">${event.currentParticipants}/${event.maxParticipants}</span>
                        </div>
                        ${event.description ? `
                        <div class="event-detail-item">
                            <span class="event-detail-label">å‚™è¨»èªªæ˜:</span>
                            <span class="event-detail-value">${event.description}</span>
                        </div>
                        ` : ''}
                        <div class="event-detail-item">
                            <span class="event-detail-label">è¯çµ¡æ–¹å¼:</span>
                            <span class="event-detail-value">${event.contact}</span>
                        </div>
                    </div>
                    <div class="form-actions">
                        ${event.currentParticipants < event.maxParticipants ? `
                            <button class="btn btn-primary" onclick="app.joinEvent(${event.id}); app.hideDetailModal();">åŠ å…¥æ´»å‹•</button>
                        ` : `
                            <span class="btn btn-secondary">æ´»å‹•å·²æ»¿</span>
                        `}
                        <button class="btn btn-secondary" onclick="app.hideDetailModal()">é—œé–‰</button>
                    </div>
                `;

                document.getElementById('detailModal').style.display = 'block';
            }

            /**
             * éš±è—æ´»å‹•è©³æƒ…å½ˆçª—
             */
            hideDetailModal() {
                document.getElementById('detailModal').style.display = 'none';
            }

            /**
             * ç¯©é¸æ´»å‹•
             */
            filterEvents() {
                const categoryFilter = document.getElementById('categoryFilter').value;
                const timeFilter = document.getElementById('timeFilter').value;

                let filteredEvents = this.events;

                // æŒ‰é¡åˆ¥ç¯©é¸
                if (categoryFilter) {
                    filteredEvents = filteredEvents.filter(event => event.category === categoryFilter);
                }

                // æŒ‰æ™‚é–“ç¯©é¸
                if (timeFilter) {
                    const filterDate = new Date(timeFilter);
                    filteredEvents = filteredEvents.filter(event => {
                        const eventDate = new Date(event.time);
                        return eventDate >= filterDate;
                    });
                }

                this.renderEvents(filteredEvents);
            }

            /**
             * æ ¼å¼åŒ–æ—¥æœŸæ™‚é–“é¡¯ç¤º
             * @param {string} dateTimeString - ISOæ—¥æœŸæ™‚é–“å­—ä¸²
             * @returns {string} æ ¼å¼åŒ–å¾Œçš„æ—¥æœŸæ™‚é–“
             */
            formatDateTime(dateTimeString) {
                const date = new Date(dateTimeString);
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                const hours = String(date.getHours()).padStart(2, '0');
                const minutes = String(date.getMinutes()).padStart(2, '0');
                return `${month}/${day} ${hours}:${minutes}`;
            }

            /**
             * é¡¯ç¤ºé€šçŸ¥è¨Šæ¯
             * @param {string} message - é€šçŸ¥å…§å®¹
             * @param {string} type - é€šçŸ¥é¡å‹ ('success' æˆ– 'error')
             */
            showNotification(message, type = 'success') {
                // ç§»é™¤ç¾æœ‰é€šçŸ¥
                const existingNotification = document.querySelector('.notification');
                if (existingNotification) {
                    existingNotification.remove();
                }

                // å»ºç«‹æ–°é€šçŸ¥
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.textContent = message;
                document.body.appendChild(notification);

                // 3ç§’å¾Œè‡ªå‹•ç§»é™¤é€šçŸ¥
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
        }

        // åˆå§‹åŒ–æ‡‰ç”¨ç¨‹å¼
        const app = new AppointmentSystem();
    </script>
</body>
</html>
